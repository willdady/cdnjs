(function(c,b,a,d){Foundation.libs.topbar={name:"topbar",version:"5.0.3",settings:{index:0,sticky_class:"sticky",custom_back_text:true,back_text:"Back",is_hover:true,mobile_show_parent_link:false,scrolltop:true},init:function(g,h,f){Foundation.inherit(this,"addCustomRule register_media throttle");var e=this;e.register_media("topbar","foundation-mq-topbar");this.bindings(h,f);c("[data-topbar]",this.scope).each(function(){var i=c(this),j=i.data("topbar-init"),m=c("section",this),l=c("> ul",this).first();i.data("index",0);var k=i.parent();if(k.hasClass("fixed")||k.hasClass(j.sticky_class)){e.settings.sticky_class=j.sticky_class;e.settings.sticky_topbar=i;i.data("height",k.outerHeight());i.data("stickyoffset",k.offset().top)}else{i.data("height",i.outerHeight())}if(!j.assembled){e.assemble(i)}if(j.is_hover){c(".has-dropdown",i).addClass("not-click")}else{c(".has-dropdown",i).removeClass("not-click")}e.addCustomRule(".f-topbar-fixed { padding-top: "+i.data("height")+"px }");if(k.hasClass("fixed")){c("body").addClass("f-topbar-fixed")}})},toggle:function(e){var g=this;if(e){var f=c(e).closest("[data-topbar]")}else{var f=c("[data-topbar]")}var h=f.data("topbar-init");var i=c("section, .section",f);if(g.breakpoint()){if(!g.rtl){i.css({left:"0%"});c(">.name",i).css({left:"100%"})}else{i.css({right:"0%"});c(">.name",i).css({right:"100%"})}c("li.moved",i).removeClass("moved");f.data("index",0);f.toggleClass("expanded").css("height","")}if(h.scrolltop){if(!f.hasClass("expanded")){if(f.hasClass("fixed")){f.parent().addClass("fixed");f.removeClass("fixed");c("body").addClass("f-topbar-fixed")}}else{if(f.parent().hasClass("fixed")){if(h.scrolltop){f.parent().removeClass("fixed");f.addClass("fixed");c("body").removeClass("f-topbar-fixed");b.scrollTo(0,0)}else{f.parent().removeClass("expanded")}}}}else{if(f.parent().hasClass(g.settings.sticky_class)){f.parent().addClass("fixed")}if(f.parent().hasClass("fixed")){if(!f.hasClass("expanded")){f.removeClass("fixed");f.parent().removeClass("expanded");g.update_sticky_positioning()}else{f.addClass("fixed");f.parent().addClass("expanded");c("body").addClass("f-topbar-fixed")}}}},timer:null,events:function(f){var e=this;c(this.scope).off(".topbar").on("click.fndtn.topbar","[data-topbar] .toggle-topbar",function(g){g.preventDefault();e.toggle(this)}).on("click.fndtn.topbar","[data-topbar] li.has-dropdown",function(k){var g=c(this),j=c(k.target),h=g.closest("[data-topbar]"),i=h.data("topbar-init");if(j.data("revealId")){e.toggle();return}if(e.breakpoint()){return}if(i.is_hover&&!Modernizr.touch){return}k.stopImmediatePropagation();if(g.hasClass("hover")){g.removeClass("hover").find("li").removeClass("hover");g.parents("li.hover").removeClass("hover")}else{g.addClass("hover");if(j[0].nodeName==="A"&&j.parent().hasClass("has-dropdown")){k.preventDefault()}}}).on("click.fndtn.topbar","[data-topbar] .has-dropdown>a",function(l){if(e.breakpoint()){l.preventDefault();var k=c(this),h=k.closest("[data-topbar]"),j=h.find("section, .section"),i=k.next(".dropdown").outerHeight(),g=k.closest("li");h.data("index",h.data("index")+1);g.addClass("moved");if(!e.rtl){j.css({left:-(100*h.data("index"))+"%"});j.find(">.name").css({left:100*h.data("index")+"%"})}else{j.css({right:-(100*h.data("index"))+"%"});j.find(">.name").css({right:100*h.data("index")+"%"})}h.css("height",k.siblings("ul").outerHeight(true)+h.data("height"))}});c(b).off(".topbar").on("resize.fndtn.topbar",e.throttle(function(){e.resize.call(e)},50)).trigger("resize");c("body").off(".topbar").on("click.fndtn.topbar touchstart.fndtn.topbar",function(h){var g=c(h.target).closest("li").closest("li.hover");if(g.length>0){return}c("[data-topbar] li").removeClass("hover")});c(this.scope).on("click.fndtn.topbar","[data-topbar] .has-dropdown .back",function(m){m.preventDefault();var l=c(this),h=l.closest("[data-topbar]"),k=h.find("section, .section"),j=h.data("topbar-init"),i=l.closest("li.moved"),g=i.parent();h.data("index",h.data("index")-1);if(!e.rtl){k.css({left:-(100*h.data("index"))+"%"});k.find(">.name").css({left:100*h.data("index")+"%"})}else{k.css({right:-(100*h.data("index"))+"%"});k.find(">.name").css({right:100*h.data("index")+"%"})}if(h.data("index")===0){h.css("height","")}else{h.css("height",g.outerHeight(true)+h.data("height"))}setTimeout(function(){i.removeClass("moved")},300)})},resize:function(){var e=this;c("[data-topbar]").each(function(){var g=c(this),i=g.data("topbar-init");var h=g.parent("."+e.settings.sticky_class);var j;if(!e.breakpoint()){var f=g.hasClass("expanded");g.css("height","").removeClass("expanded").find("li").removeClass("hover");if(f){e.toggle(g)}}if(h.length>0){if(h.hasClass("fixed")){h.removeClass("fixed");j=h.offset().top;if(c(a.body).hasClass("f-topbar-fixed")){j-=g.data("height")}g.data("stickyoffset",j);h.addClass("fixed")}else{j=h.offset().top;g.data("stickyoffset",j)}}})},breakpoint:function(){return !matchMedia(Foundation.media_queries.topbar).matches},assemble:function(f){var e=this,g=f.data("topbar-init"),i=c("section",f),h=c("> ul",f).first();i.detach();c(".has-dropdown>a",i).each(function(){var j=c(this),m=j.siblings(".dropdown"),k=j.attr("href");if(g.mobile_show_parent_link&&k&&k.length>1){var l=c('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li><a class="parent-link js-generated" href="'+k+'">'+j.text()+"</a></li>")}else{var l=c('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li>')}if(g.custom_back_text==true){c("h5>a",l).html(g.back_text)}else{c("h5>a",l).html("&laquo; "+j.html())}m.prepend(l)});i.appendTo(f);this.sticky();this.assembled(f)},assembled:function(e){e.data("topbar-init",c.extend({},e.data("topbar-init"),{assembled:true}))},height:function(f){var g=0,e=this;c("> li",f).each(function(){g+=c(this).outerHeight(true)});return g},sticky:function(){var f=c(b),e=this;c(b).on("scroll",function(){e.update_sticky_positioning()})},update_sticky_positioning:function(){var e="."+this.settings.sticky_class;var f=c(b);if(c(e).length>0){var g=this.settings.sticky_topbar.data("stickyoffset");if(!c(e).hasClass("expanded")){if(f.scrollTop()>(g)){if(!c(e).hasClass("fixed")){c(e).addClass("fixed");c("body").addClass("f-topbar-fixed")}}else{if(f.scrollTop()<=g){if(c(e).hasClass("fixed")){c(e).removeClass("fixed");c("body").removeClass("f-topbar-fixed")}}}}}},off:function(){c(this.scope).off(".fndtn.topbar");c(b).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,this,this.document));