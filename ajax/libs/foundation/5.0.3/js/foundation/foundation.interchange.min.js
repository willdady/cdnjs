(function(c,b,a,d){Foundation.libs.interchange={name:"interchange",version:"5.0.3",cache:{},images_loaded:false,nodes_loaded:false,settings:{load_attr:"interchange",named_queries:{"default":"only screen",small:Foundation.media_queries.small,medium:Foundation.media_queries.medium,large:Foundation.media_queries.large,xlarge:Foundation.media_queries.xlarge,xxlarge:Foundation.media_queries.xxlarge,landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx)"},directives:{replace:function(g,i,e){if(/IMG/.test(g[0].nodeName)){var f=g[0].src;if(new RegExp(i,"i").test(f)){return}g[0].src=i;return e(g[0].src)}var h=g.data("interchange-last-path");if(h==i){return}return c.get(i,function(j){g.html(j);g.data("interchange-last-path",i);e()})}}},init:function(f,g,e){Foundation.inherit(this,"throttle");this.data_attr="data-"+this.settings.load_attr;c.extend(true,this.settings,g,e);this.bindings(g,e);this.load("images");this.load("nodes")},events:function(){var e=this;c(b).off(".interchange").on("resize.fndtn.interchange",e.throttle(function(){e.resize.call(e)},50));return this},resize:function(){var e=this.cache;if(!this.images_loaded||!this.nodes_loaded){setTimeout(c.proxy(this.resize,this),50);return}for(var f in e){if(e.hasOwnProperty(f)){var g=this.results(f,e[f]);if(g){this.settings.directives[g.scenario[1]](g.el,g.scenario[0],function(){if(arguments[0] instanceof Array){var h=arguments[0]}else{var h=Array.prototype.slice.call(arguments,0)}g.el.trigger(g.scenario[1],h)})}}}},results:function(h,l){var j=l.length;if(j>0){var g=this.S('[data-uuid="'+h+'"]');for(var e=j-1;e>=0;e--){var f,k=l[e][2];if(this.settings.named_queries.hasOwnProperty(k)){f=matchMedia(this.settings.named_queries[k])}else{f=matchMedia(k)}if(f.matches){return{el:g,scenario:l[e]}}}}return false},load:function(f,e){if(typeof this["cached_"+f]==="undefined"||e){this["update_"+f]()}return this["cached_"+f]},update_images:function(){var e=this.S("img["+this.data_attr+"]"),j=e.length,h=0,g=this.data_attr;this.cache={};this.cached_images=[];this.images_loaded=(j===0);for(var f=j-1;f>=0;f--){h++;if(e[f]){var k=e[f].getAttribute(g)||"";if(k.length>0){this.cached_images.push(e[f])}}if(h===j){this.images_loaded=true;this.enhance("images")}}return this},update_nodes:function(){var e=this.S("["+this.data_attr+"]").not("img"),j=e.length,h=0,g=this.data_attr;this.cached_nodes=[];this.nodes_loaded=(j===0);for(var f=j-1;f>=0;f--){h++;var k=e[f].getAttribute(g)||"";if(k.length>0){this.cached_nodes.push(e[f])}if(h===j){this.nodes_loaded=true;this.enhance("nodes")}}return this},enhance:function(f){var g=this["cached_"+f].length;for(var e=g-1;e>=0;e--){this.object(c(this["cached_"+f][e]))}return c(b).trigger("resize")},parse_params:function(f,g,e){return[this.trim(f),this.convert_directive(g),this.trim(e)]},convert_directive:function(f){var e=this.trim(f);if(e.length>0){return e}return"replace"},object:function(h){var k=this.parse_data_attr(h),m=[],j=k.length;if(j>0){for(var g=j-1;g>=0;g--){var f=k[g].split(/\((.*?)(\))$/);if(f.length>1){var e=f[0].split(","),l=this.parse_params(e[0],e[1],f[1]);m.push(l)}}}return this.store(h,m)},uuid:function(f){var g=f||"-";function e(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return(e()+e()+g+e()+g+e()+g+e()+g+e()+e()+e())},store:function(f,h){var e=this.uuid(),g=f.data("uuid");if(this.cache[g]){return this.cache[g]}f.attr("data-uuid",e);return this.cache[e]=h},trim:function(e){if(typeof e==="string"){return c.trim(e)}return e},parse_data_attr:function(h){var f=h.data(this.settings.load_attr).split(/\[(.*?)\]/),j=f.length,e=[];for(var g=j-1;g>=0;g--){if(f[g].replace(/[\W\d]+/,"").length>4){e.push(f[g])}}return e},reflow:function(){this.load("images",true);this.load("nodes",true)}}}(jQuery,this,this.document));