(function(c,b,a,d){Foundation.libs.magellan={name:"magellan",version:"5.0.3",settings:{active_class:"active",threshold:0},init:function(f,g,e){this.fixed_magellan=c("[data-magellan-expedition]");this.magellan_placeholder=c("<div></div>").css({height:this.fixed_magellan.outerHeight(true)}).hide().insertAfter(this.fixed_magellan);this.set_threshold();this.set_active_class(g);this.last_destination=c("[data-magellan-destination]").last();this.events()},events:function(){var e=this;c(this.scope).off(".magellan").on("arrival.fndtn.magellan","[data-magellan-arrival]",function(i){var g=c(this),h=g.closest("[data-magellan-expedition]"),f=h.attr("data-magellan-active-class")||e.settings.active_class;g.closest("[data-magellan-expedition]").find("[data-magellan-arrival]").not(g).removeClass(f);g.addClass(f)});this.fixed_magellan.off(".magellan").on("update-position.fndtn.magellan",function(){var f=c(this)}).trigger("update-position");c(b).off(".magellan").on("resize.fndtn.magellan",function(){this.fixed_magellan.trigger("update-position")}.bind(this)).on("scroll.fndtn.magellan",function(){var f=c(b).scrollTop();e.fixed_magellan.each(function(){var h=c(this);if(typeof h.data("magellan-top-offset")==="undefined"){h.data("magellan-top-offset",h.offset().top)}if(typeof h.data("magellan-fixed-position")==="undefined"){h.data("magellan-fixed-position",false)}var i=(f+e.settings.threshold)>h.data("magellan-top-offset");var g=h.attr("data-magellan-top-offset");if(h.data("magellan-fixed-position")!=i){h.data("magellan-fixed-position",i);if(i){h.addClass("fixed");h.css({position:"fixed",top:0});e.magellan_placeholder.show()}else{h.removeClass("fixed");h.css({position:"",top:""});e.magellan_placeholder.hide()}if(i&&typeof g!="undefined"&&g!=false){h.css({position:"fixed",top:g+"px"})}}})});if(this.last_destination.length>0){c(b).on("scroll.fndtn.magellan",function(h){var g=c(b).scrollTop(),f=g+c(b).height(),i=Math.ceil(e.last_destination.offset().top);c("[data-magellan-destination]").each(function(){var l=c(this),k=l.attr("data-magellan-destination"),j=l.offset().top-l.outerHeight(true)-g;if(j<=e.settings.threshold){c("[data-magellan-arrival='"+k+"']").trigger("arrival")}if(f>=c(e.scope).height()&&i>g&&i<f){c("[data-magellan-arrival]").last().trigger("arrival")}})})}},set_threshold:function(){if(typeof this.settings.threshold!=="number"){this.settings.threshold=(this.fixed_magellan.length>0)?this.fixed_magellan.outerHeight(true):0}},set_active_class:function(e){if(e&&e.active_class&&typeof e.active_class==="string"){this.settings.active_class=e.active_class}},off:function(){c(this.scope).off(".fndtn.magellan");c(b).off(".fndtn.magellan")},reflow:function(){}}}(jQuery,this,this.document));