function FastClick(e){var d,f=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType){throw new TypeError("Layer must be a document node")}this.onClick=function(){return FastClick.prototype.onClick.apply(f,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(f,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(f,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(f,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(f,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(f,arguments)},FastClick.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(a,i,h){var g=Node.prototype.removeEventListener;"click"===a?g.call(e,a,i.hijacked||i,h):g.call(e,a,i,h)},e.addEventListener=function(a,i,h){var g=Node.prototype.addEventListener;"click"===a?g.call(e,a,i.hijacked||(i.hijacked=function(b){b.propagationStopped||i(b)}),h):g.call(e,a,i,h)}),"function"==typeof e.onclick&&(d=e.onclick,e.addEventListener("click",function(b){d(b)},!1),e.onclick=null))}FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(b){switch(b.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(b.disabled){return !0}break;case"input":if(this.deviceIsIOS&&"file"===b.type||b.disabled){return !0}break;case"label":case"video":return !0}return/\bneedsclick\b/.test(b.className)},FastClick.prototype.needsFocus=function(b){switch(b.nodeName.toLowerCase()){case"textarea":return !0;case"select":return !this.deviceIsAndroid;case"input":switch(b.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return !1}return !b.disabled&&!b.readOnly;default:return/\bneedsfocus\b/.test(b.className)}},FastClick.prototype.sendClick=function(f,e){var h,g;document.activeElement&&document.activeElement!==f&&document.activeElement.blur(),g=e.changedTouches[0],h=document.createEvent("MouseEvents"),h.initMouseEvent(this.determineEventType(f),!0,!0,window,1,g.screenX,g.screenY,g.clientX,g.clientY,!1,!1,!1,!1,0,null),h.forwardedTouchEvent=!0,f.dispatchEvent(h)},FastClick.prototype.determineEventType=function(b){return this.deviceIsAndroid&&"select"===b.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(d){var c;this.deviceIsIOS&&d.setSelectionRange&&0!==d.type.indexOf("date")&&"time"!==d.type?(c=d.value.length,d.setSelectionRange(c,c)):d.focus()},FastClick.prototype.updateScrollParent=function(e){var d,f;if(d=e.fastClickScrollParent,!d||!d.contains(e)){f=e;do{if(f.scrollHeight>f.offsetHeight){d=f,e.fastClickScrollParent=f;break}f=f.parentElement}while(f)}d&&(d.fastClickLastScrollTop=d.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(b){return b.nodeType===Node.TEXT_NODE?b.parentNode:b},FastClick.prototype.onTouchStart=function(f){var e,h,g;if(f.targetTouches.length>1){return !0}if(e=this.getTargetElementFromEventTarget(f.target),h=f.targetTouches[0],this.deviceIsIOS){if(g=window.getSelection(),g.rangeCount&&!g.isCollapsed){return !0}if(!this.deviceIsIOS4){if(h.identifier===this.lastTouchIdentifier){return f.preventDefault(),!1}this.lastTouchIdentifier=h.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=f.timeStamp,this.targetElement=e,this.touchStartX=h.pageX,this.touchStartY=h.pageY,f.timeStamp-this.lastClickTime<200&&f.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){var d=e.changedTouches[0],f=this.touchBoundary;return Math.abs(d.pageX-this.touchStartX)>f||Math.abs(d.pageY-this.touchStartY)>f?!0:!1},FastClick.prototype.onTouchMove=function(b){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(b.target)||this.touchHasMoved(b))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(b){return void 0!==b.control?b.control:b.htmlFor?document.getElementById(b.htmlFor):b.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(i){var h,n,m,l,k,j=this.targetElement;if(!this.trackingClick){return !0}if(i.timeStamp-this.lastClickTime<200){return this.cancelNextClick=!0,!0}if(this.cancelNextClick=!1,this.lastClickTime=i.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(k=i.changedTouches[0],j=document.elementFromPoint(k.pageX-window.pageXOffset,k.pageY-window.pageYOffset)||j,j.fastClickScrollParent=this.targetElement.fastClickScrollParent),m=j.tagName.toLowerCase(),"label"===m){if(h=this.findControl(j)){if(this.focus(j),this.deviceIsAndroid){return !1}j=h}}else{if(this.needsFocus(j)){return i.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&"input"===m?(this.targetElement=null,!1):(this.focus(j),this.deviceIsIOS4&&"select"===m||(this.targetElement=null,i.preventDefault()),!1)}}return this.deviceIsIOS&&!this.deviceIsIOS4&&(l=j.fastClickScrollParent,l&&l.fastClickLastScrollTop!==l.scrollTop)?!0:(this.needsClick(j)||(i.preventDefault(),this.sendClick(j,i)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(b){return this.targetElement?b.forwardedTouchEvent?!0:b.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(b.stopImmediatePropagation?b.stopImmediatePropagation():b.propagationStopped=!0,b.stopPropagation(),b.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(d){var c;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===d.target.type&&0===d.detail?!0:(c=this.onMouse(d),c||(this.targetElement=null),c)},FastClick.prototype.destroy=function(){var b=this.layer;this.deviceIsAndroid&&(b.removeEventListener("mouseover",this.onMouse,!0),b.removeEventListener("mousedown",this.onMouse,!0),b.removeEventListener("mouseup",this.onMouse,!0)),b.removeEventListener("click",this.onClick,!0),b.removeEventListener("touchstart",this.onTouchStart,!1),b.removeEventListener("touchmove",this.onTouchMove,!1),b.removeEventListener("touchend",this.onTouchEnd,!1),b.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){var d,f;if("undefined"==typeof window.ontouchstart){return !0}if(f=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid){return !0}if(d=document.querySelector("meta[name=viewport]")){if(-1!==d.content.indexOf("user-scalable=no")){return !0}if(f>31&&window.innerWidth<=window.screen.width){return !0}}}return"none"===e.style.msTouchAction?!0:!1},FastClick.attach=function(b){return new FastClick(b)},"undefined"!=typeof define&&define.amd?define(function(){return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick;