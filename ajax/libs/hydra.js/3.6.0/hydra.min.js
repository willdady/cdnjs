/*! Hydra.js v3.6.0 | Date:2013-12-08 | License: https://raw.github.com/tcorral/Hydra.js/master/LICENSE| (c) 2009, 2013
//@ sourceMappingURL=hydra.min.map
*/

(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;i=function(a,b){var c="The module "+a+" is not registered in the system";if(b)throw new Error(c);return c},f="object",l="function";function v(b){try{return b instanceof Event}catch(c){if(b.altKey!==a&&(b.srcElement||b.target))return!0}return j}function w(a){var c=j;return b.jQuery&&(c=a instanceof b.jQuery),c}function x(){}function y(){var a=Math,b=+new Date+"",c=a.floor(999999*a.random())+1;return b+"_"+c}function z(a){var b,c;if(Object.keys)b=Object.keys(a).length;else{b=0;for(c in a)G(a,c)&&b++}return b}t=typeof exports===f&&typeof module===f&&typeof module.exports===f&&typeof require===l,c="undefined",u=Object.prototype,b=this,g=null,j=!1,d={},k="3.6.0",o=j,h=j;function A(a){return u.toString.call(a)}function B(a){return A(a)==="["+f+" Function]"}function C(a){return A(a)==="["+f+" Array]"}function D(a){o=a}function E(a){h=a}function F(a,b){return[].slice.call(a,b||0)}function G(a,b){return a.hasOwnProperty(b)}function H(a,b,c,d){var e,f;for(e in b)G(b,e)&&(f=b[e],a[e]&&typeof f===l&&f(a,c,d))}function I(a,b,e,f,g){var h,j;return h=d[b],g&&a.isModuleStarted(b)&&a.stop(b),typeof h!==c?(j=O(b),h.instances[e]=j,j.__instance_id__=e,H(j,a.oModifyInit,f,g),typeof f!==c?j.init(f):j.init()):p.error(new Error,i(b)),j}function J(a,b){var c;for(c in b)G(b,c)&&(a[c]=b[c]);return a}function K(a){var b,c,d,e,g;if(null==a||f!==typeof a)return a;if(v(a)||w(a))return a;if(a instanceof Date)return b=new Date,b.setTime(a.getTime()),b;if(a instanceof Array){for(b=[],d=0,e=a.length;e>d;d++)c=a[d],b[d]=K(c);return b}if(a instanceof Object){b={};for(g in a)G(a,g)&&(b[g]=K(a[g]));return b}throw new Error("Unable to copy obj! Its type isn't supported.")}function L(a,b,c,d){a[b]=function(a,b){return function(){var d=F(arguments,0);try{return b.apply(this,d)}catch(e){return p.error(c,a,e),j}}}(b,d)}s={global:{}};function M(a,b){var d=[],e;if(typeof a!==c)for(e in a)G(a,e)&&e===b&&(d=a[e]);return d}r={subscribers:function(a,b){return M(s[a],b)},_getChannelEvents:function(b,c){return s[b]===a&&(s[b]={}),s[b][c]===a&&(s[b][c]=[]),s[b][c]},_addSubscribers:function(a,b,c){var d;for(d in a)G(a,d)&&this.subscribeTo(b,d,a[d],c)},unsubscribeFrom:function(a,b,c){var d=this._getChannelEvents(a,b),e,f=d.length-1;for(;f>=0;f--)e=d[f],e.subscriber===c&&d.splice(f,1)},subscribeTo:function(a,b,c,d){var e=this._getChannelEvents(a,b);e.push({subscriber:d,handler:c})},subscribe:function(b){var c,d=b.events;if(!b||d===a)return j;for(c in d)G(d,c)&&(s[c]===a&&(s[c]={}),this._addSubscribers(d[c],c,b));return!0},_removeSubscribers:function(a,b){var d=0,e;if(typeof a!==c)for(e=a.length-1;e>=0;e--)a[e].subscriber===b&&(d++,a.splice(e,1));return d},_removeSubscribersPerEvent:function(a,b,c){var d,e,f,g,h=0;for(d in a)G(a,d)&&(e=d.split(":"),f=b,g=d,"global"===e[0]&&(f=e[0],g=e[1]),h+=this._removeSubscribers(s[f][g],c));return h},unsubscribe:function(b){var c=0,d,e=b.events;if(!b||e===a)return j;for(d in e)G(e,d)&&(s[d]===a&&(s[d]={}),c=this._removeSubscribersPerEvent(e[d],d,b));return c>0},_avoidBlockUI:function(a,b,c,d){var e,f=a.concat();setTimeout(function g(){var a=+new Date;do e=f.shift(),e.handler.call(e.subscriber,b),o&&p.log(c,d,e);while(f.length>0&&+new Date-a<50);f.length>0&&setTimeout(g,25)},25)},publish:function(a,b,c){var d=this.subscribers(a,b).slice(),e=d.length,f=0,g,i;if(0===e)return j;if(i=K(c),h)this._avoidBlockUI(d,i,a,b);else for(;e>f;f++)g=d[f],g.handler.call(g.subscriber,i),o&&p.log(a,b,g);return!0},reset:function(){s={global:{}}}};function N(a){var b,f;return b=d[a].creator(r,n.module,n.errorHandler(),n),b.__module_id__=a,f=b.init||x,b.__action__=b.__sandbox__=r,b.events=b.events||{},b.init=function(){var a=F(arguments,0).concat(e);return r.subscribe(b),f.apply(this,a)},b.handleAction=function(a){var b=this.events[a.type];typeof b!==c&&b.call(this,a)},b.onDestroy=b.onDestroy||b.destroy||function(){},b.destroy=function(){this.onDestroy(),r.unsubscribe(b),delete d[a].instances[b.__instance_id__]},b}function O(a){var b,e;if(typeof d[a]===c&&i(a,!0),b=N(a),!o)for(e in b)G(b,e)&&B(b[e])&&L(b,e,a,b[e]);return b}p=b.console||{log:function(){},error:function(){}},q=function(){},q.prototype={type:"Module",getInstance:O,oModifyInit:{},register:function(a,b){return d[a]=new m(a,b),d[a]},_setSuper:function(a,b){a.__super__={},a.__super__.__instance__=b,a.__super__.__call__=function(b,c){var d=this;while(G(d,b)===j)d=d.__instance__.__super__;return d[b].apply(a,c)}},_callInSuper:function(a){return function(){var b=F(arguments,0);a.apply(this,b)}},_mergeModuleExtended:function(a,b){var d;for(d in b)G(b,d)&&(typeof a.__super__!==c&&B(a[d])&&(a.__super__[d]=this._callInSuper(a[d])),a[d]=b[d])},_mergeModuleBase:function(a,b){var c;for(c in b)G(b,c)&&"__super__"!==c&&(a[c]=b[c])},_merge:function(a,b){var c={};return this._setSuper(c,a),this._mergeModuleBase(c,a),this._mergeModuleExtended(c,b),c},setInstance:function(a,b,c){var e=d[a];return e||i(a,!0),e.instances[b]=c,e},setVars:function(a){e=typeof e!==c?J(e,a):a},getVars:function(){return J({},e)},_multiModuleStart:function(a,b,c,d){var e,f,g,h,i,j;for(C(b)&&(e=b.slice(0)),C(c)&&(f=c.slice(0)),C(d)&&(g=d.slice(0)),h=0,i=a.length;i>h;h++)j=a[h],b=e&&e[h]||y(),c=f&&f[h]||c,d=g&&g[h]||d,I(this,j,b,c,d)},_singleModuleStart:function(a,b,c,d){"string"!=typeof b&&(d=c,c=b,b=y()),I(this,a,b,c,d)},start:function(a,b,c,d){var e=C(a);e?this._multiModuleStart(a.slice(0),b,c,d):this._singleModuleStart(a,b,c,d)},extend:function(a,b,c){var e=d[a],f,h;return e?(h=O(a),typeof b===l&&(c=b,b=a),f=c(r,n.module,n.errorHandler(),n,h),d[b]=new m(b,function(){var a={};return a=J(a,h),a=J(a,f),a=J(a,{__super__:{__call__:function(a,b){return h[a].apply(h,b)}}})}),d[b]):(p.log(i(a)),g)},decorate:function(){return this.extend.apply(this,arguments)},isModuleStarted:function(a,b){var e=j;return e=typeof b===c?typeof d[a]!==c&&z(d[a].instances)>0:typeof d[a]!==c&&typeof d[a].instances[b]!==c},startAll:function(){var a,b;for(a in d)G(d,a)&&(b=d[a],typeof b!==c&&this.start(a,y()))},_multiModuleStop:function(a){var b,d=a.instances,e;for(b in d)G(d,b)&&(e=d[b],typeof a!==c&&typeof e!==c&&e.destroy());a.instances={}},_singleModuleStop:function(a,b,d){var e=a.instances[d];typeof a!==c&&typeof e!==c&&(e.destroy(),delete a.instances[d])},stop:function(a,b){var e;return e=d[a],typeof e===c?j:(typeof b!==c?this._singleModuleStop(e,a,b):this._multiModuleStop(e),!0)},_stopOneByOne:function(a,b){var c;for(c in a)G(a,c)&&this.stop(b,c)},stopAll:function(){var a;for(a in d)G(d,a)&&typeof d[a]!==c&&this._stopOneByOne(d[a].instances,a)},_delete:function(a){return typeof d[a]!==c?(delete d[a],!0):j},remove:function(a){var b=d[a];if(typeof b===c)return g;if(typeof b!==c)try{return b}finally{this._delete(a)}return g}};function P(){return p}function Q(a){p=a}n=function(){},n.version=k,n.bus=r,n.errorHandler=P,n.setErrorHandler=Q,n.module=new q,n.setUnblockUI=E,n.setDebug=D,n.getDebug=function(){return o},n.extend=function(a,b){this[a]=typeof this[a]===c?b:J(this[a],b)},n.noConflict=function(a,b,d){return typeof this[a]!==c?(b[d]=this[a],!0):j},n.addExtensionBeforeInit=function(a){n.module.oModifyInit=J(n.module.oModifyInit,a)},n.getCopyModules=function(){return K(d)},n.getCopyChannels=function(){return K(s)},m=function(a,b){if(typeof b===c)throw new Error("Something goes wrong!");this.creator=b,this.instances={},this.sModuleId=a},m.prototype={start:function(a){return n.module.start(this.sModuleId,a),this},extend:function(a,b){return n.module.extend(this.sModuleId,a,b),this},stop:function(){return n.module.stop(this.sModuleId),this}},b.Hydra=n,t?module.exports=n:typeof define!==c&&define("hydra",[],function(){return n})}).call(this);
//# sourceMappingURL=hydra.min.map