/*! Hydra.js v3.5.0 | Date:2013-12-04 | License: https://raw.github.com/tcorral/Hydra.js/master/LICENSE| (c) 2009, 2013
//@ sourceMappingURL=hydra.min.map
*/

(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;function r(a){try{return a instanceof Event}catch(b){if("undefined"!=typeof a.altKey&&(a.srcElement||a.target))return!0}return!1}function s(b){var c=!1;return a.jQuery&&(c=b instanceof a.jQuery),c}function t(){}function u(){var a=+new Date+"",b=Math.floor(999999*Math.random())+1;return a+"_"+b}function v(a){var b,c;if(Object.keys)b=Object.keys(a).length;else{b=0;for(c in a)C(a,c)&&b++}return b}"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),p="object"==typeof exports&&"object"==typeof module&&"object"==typeof module.exports&&"function"==typeof require,b="undefined",q=Object.prototype,a=this,e=null,g=!1,c={},h="3.5.0",k=g,f=g;function w(a){return q.toString.call(a)}function x(a){return"[object Function]"===w(a)}function y(a){return"[object Array]"===w(a)}function z(a){k=a}function A(a){f=a}function B(a,b){return[].slice.call(a,b||0)}function C(a,b){return a.hasOwnProperty(b)}function D(a,b,c,d){var e;for(e in b)b.hasOwnProperty(e)&&a[e]&&"function"==typeof b[e]&&b[e](a,c,d)}function E(a,d,e,f,g){var h,i;return h=c[d],g&&a.isModuleStarted(d)&&a.stop(d),typeof h!==b?(i=K(d),h.instances[e]=i,i.__instance_id__=e,D(i,a.oModifyInit,f,g),typeof f!==b?i.init(f):i.init()):l.error(new Error,"The module "+d+" is not registered in the system"),i}function F(a,b){var c;for(c in b)C(b,c)&&(a[c]=b[c]);return a}function G(a){var b,c,d,e,f;if(null==a||"object"!=typeof a)return a;if(r(a)||s(a))return a;if(a instanceof Date)return b=new Date,b.setTime(a.getTime()),b;if(a instanceof Array){for(b=[],d=0,e=a.length;e>d;d++)c=a[d],b[d]=G(c);return b}if(a instanceof Object){b={};for(f in a)a.hasOwnProperty(f)&&(b[f]=G(a[f]));return b}throw new Error("Unable to copy obj! Its type isn't supported.")}function H(a,b,c,d){a[b]=function(a,b){return function(){var d=B(arguments,0);try{return b.apply(this,d)}catch(e){return l.error(c,a,e),!1}}}(b,d)}o={global:{}};function I(a,b){var c=[],d;if("undefined"!=typeof a)for(d in a)C(a,d)&&d===b&&(c=a[d]);return c}n={subscribers:function(a,b){return I(o[a],b)},_getChannelEvents:function(a,b){return"undefined"==typeof o[a]&&(o[a]={}),"undefined"==typeof o[a][b]&&(o[a][b]=[]),o[a][b]},_addSubscribers:function(a,b,c){var d;for(d in a)C(a,d)&&this.subscribeTo(b,d,a[d],c)},unsubscribeFrom:function(a,b,c){var d=this._getChannelEvents(a,b),e,f=d.length-1;for(;f>=0;f--)e=d[f],e.subscriber===c&&d.splice(f,1)},subscribeTo:function(a,b,c,d){var e=this._getChannelEvents(a,b);e.push({subscriber:d,handler:c})},subscribe:function(a){var b,c=a.events;if(!a||"undefined"==typeof c)return!1;for(b in c)C(c,b)&&("undefined"==typeof o[b]&&(o[b]={}),this._addSubscribers(c[b],b,a));return!0},_removeSubscribers:function(a,c){var d=0,e;if(typeof a!==b)for(e=a.length-1;e>=0;e--)a[e].subscriber===c&&(d++,a.splice(e,1));return d},_removeSubscribersPerEvent:function(a,b,c){var d,e,f,g,h=0;for(d in a)C(a,d)&&(e=d.split(":"),f=b,g=d,"global"===e[0]&&(f=e[0],g=e[1]),h+=this._removeSubscribers(o[f][g],c));return h},unsubscribe:function(a){var b=0,c,d=a.events;if(!a||"undefined"==typeof d)return!1;for(c in d)C(d,c)&&("undefined"==typeof o[c]&&(o[c]={}),b=this._removeSubscribersPerEvent(d[c],c,a));return b>0},_avoidBlockUI:function(a,b,c,d){var e,f=a.concat();setTimeout(function g(){var a=+new Date;do e=f.shift(),e.handler.call(e.subscriber,b),k&&l.log(c,d,e);while(f.length>0&&+new Date-a<50);f.length>0&&setTimeout(g,25)},25)},publish:function(a,b,c){var d=this.subscribers(a,b).slice(),e=d.length,g=0,h,i;if(0===e)return!1;if(i=G(c),f)this._avoidBlockUI(d,i,a,b);else for(;e>g;g++)h=d[g],h.handler.call(h.subscriber,i),k&&l.log(a,b,h);return!0},reset:function(){o={global:{}}}};function J(a){var e,f;return e=c[a].creator(n,j.module,j.errorHandler(),j),e.__module_id__=a,f=e.init||t,e.__action__=e.__sandbox__=n,e.events=e.events||{},e.init=function(){var a=B(arguments,0).concat(d);return n.subscribe(e),f.apply(this,a)},e.handleAction=function(a){var c=this.events[a.type];typeof c!==b&&c.call(this,a)},e.onDestroy=e.onDestroy||e.destroy||function(){},e.destroy=function(){this.onDestroy(),n.unsubscribe(e),delete c[a].instances[e.__instance_id__]},e}function K(a){var d,e;if(typeof c[a]===b)throw new Error("The module "+a+" is not registered!");if(d=J(a),!k)for(e in d)C(d,e)&&x(d[e])&&H(d,e,a,d[e]);return d}l=a.console||{log:function(){},error:function(){}},m=function(){},m.prototype={type:"Module",getInstance:K,oModifyInit:{},register:function(a,b){return c[a]=new i(a,b),c[a]},_setSuper:function(a,b){a.__super__={},a.__super__.__instance__=b,a.__super__.__call__=function(b,c){var d=this;while(C(d,b)===g)d=d.__instance__.__super__;return d[b].apply(a,c)}},_callInSuper:function(a){return function(){var b=B(arguments,0);a.apply(this,b)}},_mergeModuleExtended:function(a,c){var d;for(d in c)C(c,d)&&(typeof a.__super__!==b&&x(a[d])&&(a.__super__[d]=this._callInSuper(a[d])),a[d]=c[d])},_mergeModuleBase:function(a,b){var c;for(c in b)C(b,c)&&"__super__"!==c&&(a[c]=b[c])},_merge:function(a,b){var c={};return this._setSuper(c,a),this._mergeModuleBase(c,a),this._mergeModuleExtended(c,b),c},extend:function(a,d,e){var f,g,h,k,l,m,o;return o=this,f=c[a],g=a,h=function(){},"string"==typeof d?(g=d,h=e):h=d,typeof f!==b?(l=h(n,j.module,j.errorHandler(),j),k=f.creator(n,j.module,j.errorHandler(),j),c[g]=new i(g,function(a){return m=o._merge(k,l),m.__action__=m.__sandbox__=a,m}),c[g]):void 0},setInstance:function(a,b,d){var e=c[a];if(!e)throw new Error("The module "+a+" is not registered!");return e.instances[b]=d,e},setVars:function(a){d=typeof d!==b?F(d,a):a},getVars:function(){return F({},d)},_multiModuleStart:function(a,b,c,d){var e,f,g,h,i,j;for(y(b)&&(e=b.slice(0)),y(c)&&(f=c.slice(0)),y(d)&&(g=d.slice(0)),h=0,i=a.length;i>h;h++)j=a[h],b=e&&e[h]||u(),c=f&&f[h]||c,d=g&&g[h]||d,E(this,j,b,c,d)},_singleModuleStart:function(a,b,c,d){"string"!=typeof b&&(d=c,c=b,b=u()),E(this,a,b,c,d)},start:function(a,b,c,d){var e=y(a);e?this._multiModuleStart(a.slice(0),b,c,d):this._singleModuleStart(a,b,c,d)},decorate:function(a,b,d){var e=c[a],f;return e?(f=K(a),c[b]={creator:function(a,b,c,e){var g={},h=d(a,b,c,e,f);return F(g,f),F(g,h),g}},c[b].instances=[],new i(b,c[b].creator)):(l.log(a+" module is not registered!"),null)},isModuleStarted:function(a,d){var e=!1;return e=typeof d===b?typeof c[a]!==b&&v(c[a].instances)>0:typeof c[a]!==b&&typeof c[a].instances[d]!==b},startAll:function(){var a,d;for(a in c)C(c,a)&&(d=c[a],typeof d!==b&&this.start(a,u()))},_multiModuleStop:function(a){var c,d=a.instances,e;for(c in d)C(d,c)&&(e=d[c],typeof a!==b&&typeof e!==b&&e.destroy());a.instances={}},_singleModuleStop:function(a,c,d){var e=a.instances[d];typeof a!==b&&typeof e!==b&&(e.destroy(),delete a.instances[d])},stop:function(a,d){var e;return e=c[a],typeof e===b?!1:(typeof d!==b?this._singleModuleStop(e,a,d):this._multiModuleStop(e),!0)},_stopOneByOne:function(a,b){var c;for(c in a)C(a,c)&&this.stop(b,c)},stopAll:function(){var a;for(a in c)C(c,a)&&typeof c[a]!==b&&this._stopOneByOne(c[a].instances,a)},_delete:function(a){return typeof c[a]!==b?(delete c[a],!0):!1},remove:function(a){var d=c[a];if(typeof d===b)return null;if(typeof d!==b)try{return d}finally{this._delete(a)}return null}};function L(){return l}function M(a){l=a}j=function(){},j.version=h,j.bus=n,j.errorHandler=L,j.setErrorHandler=M,j.module=new m,j.setUnblockUI=A,j.setDebug=z,j.getDebug=function(){return k},j.extend=function(a,c){this[a]=typeof this[a]===b?c:F(this[a],c)},j.noConflict=function(a,c,d){return typeof this[a]!==b?(c[d]=this[a],!0):!1},j.addExtensionBeforeInit=function(a){j.module.oModifyInit=F(j.module.oModifyInit,a)},j.getCopyModules=function(){return G(c)},j.getCopyChannels=function(){return G(o)},i=function(a,c){if(typeof c===b)throw new Error("Something goes wrong!");this.creator=c,this.instances={},this.sModuleId=a},i.prototype={start:function(a){return j.module.start(this.sModuleId,a),this},extend:function(a,b){return j.module.extend(this.sModuleId,a,b),this},stop:function(){return j.module.stop(this.sModuleId),this}},a.Hydra=j,p?module.exports=j:"undefined"!=typeof define&&define("hydra",[],function(){return j})}).call(this);
//# sourceMappingURL=hydra.min.map